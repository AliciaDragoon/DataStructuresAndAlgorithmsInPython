## 有一个著名的城市（这里可能是无名的)，城市居民享有这样的声誉：仅当一顿饭的质量是他们有生以来所体验的最好的，他们才会享受这顿饭；否则，就厌恶它。
## 假设饭菜的质量均匀分布于一个人的一生，描述此城市的居民对饭菜满意的预期次数。

# 城市居民用餐满意度期望分析

## 问题描述
- 城市居民仅在当前饭菜质量超过其一生中所有过往饭菜质量时才满意（视为新纪录）
- 饭菜质量独立同分布且连续（避免平局），质量序列的相对顺序随机均匀
- 居民一生共进餐 $n$ 次，求满意度期望值

## 数学建模
定义指示随机变量：
$$
I_k = \begin{cases} 
1 & \text{第 } k \text{ 次进餐创质量新纪录} \\
0 & \text{否则}
\end{cases}
\quad (k=1,2,\cdots,n)
$$

总满意次数为：
$$
S_n = \sum_{k=1}^n I_k
$$

期望满意度：
$$
E[S_n] = E\left[\sum_{k=1}^n I_k\right] = \sum_{k=1}^n E[I_k] = \sum_{k=1}^n P(I_k=1)
$$

## 关键概率计算
对第 $k$ 次进餐：
- 需成为前 $k$ 次进餐中质量最高者
- 由独立同分布连续随机变量的性质，前 $k$ 次进餐质量排列均匀随机
- 最大值出现在第 $k$ 位置的概率为：
$$
P(I_k=1) = \frac{1}{k}
$$

**推导说明**：  
前 $k$ 次进餐质量的最大值等可能出现在任意一次进餐，故特定位置 $k$ 为最大值的概率为 $1/k$。

## 期望值求解
代入概率表达式：
$$
E[S_n] = \sum_{k=1}^n \frac{1}{k} = H_n
$$
其中 $H_n$ 为第 $n$ 项**调和数**（Harmonic Number）。

## 调和数性质
调和数的显式表达：
$$
H_n = 1 + \frac{1}{2} + \frac{1}{3} + \cdots + \frac{1}{n}
$$

大 $n$ 渐近近似（Euler-Mascheroni 常数 $\gamma \approx 0.57721$）：
$$
H_n \approx \ln n + \gamma
$$

## 结果解释
居民一生用餐满意次数的期望值为 $H_n$：
- **第一餐**必然满意（$P=1$）
- **后续进餐**满意度概率递减
- 增长速度为对数级（缓慢增长）

### 示例计算
| 进餐次数 $n$ | 期望满意次数 $H_n$ | 近似值 |
|-------------|-------------------|-------|
| 10         | $H_{10}$         | ≈2.928 |
| 100        | $H_{100}$        | ≈5.187 |
| 1000       | $H_{1000}$       | ≈7.485 |

## 结论
对一生进餐 $n$ 次的居民，用餐满意度的期望次数为：
$$ \boxed{E[S_n] = H_n = \sum_{k=1}^n \frac{1}{k}} $$
此结果由质量序列的随机排列性和纪录更新概率特性决定。